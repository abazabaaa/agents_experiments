{
  "logging": {
    "log_file": "logs/smoke_pipeline.log",
    "trace_workflow_name": "gpt5-mini-smoke",
    "trace_metadata": {
      "project": "agent-pipeline-smoke",
      "benchmark": "gpt5-mini"
    }
  },
  "io": {
    "input_artifact": "artifacts/lark_docs.json",
    "output_directory": "artifacts/smoke_output"
  },
  "concurrency": {
    "router_pool": 12,
    "markdown_pool": 16,
    "notebook_pool": 8,
    "review_pool": 6,
    "naming_pool": 4,
    "channel_buffer": 64,
    "buffers": {
      "router": 32,
      "markdown": 48,
      "notebook": 32,
      "review": 32,
      "naming": 16,
      "write": 16
    },
    "model_limits": {
      "gpt-5-mini": 32
    },
    "agent_thread_limit": 48
  },
  "retry": {
    "max_attempts": 5,
    "initial_delay": 0.5,
    "backoff_multiplier": 2.0,
    "max_delay": 60.0,
    "jitter_ratio": 0.25
  },
  "prompts": {
    "dir": "prompts/smoke"
  },
  "rework": {
    "enabled": true,
    "max_cycles": 1,
    "target_on_reject": "router"
  },
  "httpx": {
    "connect": 5.0,
    "read": null,
    "write": 30.0,
    "pool": 5.0
  },
  "agents": {
    "router": {
      "name": "Router",
      "model": "gpt-5-mini",
      "reasoning_effort": "minimal",
      "verbosity": "low",
      "timeout": 180.0,
      "max_tokens": 1024,
      "run_max_turns": 1,
      "instructions_path": "prompts/agents/smoke/router.md"
    },
    "markdown_cleaner": {
      "name": "MarkdownPolisher",
      "model": "gpt-5-mini",
      "reasoning_effort": "medium",
      "verbosity": "medium",
      "timeout": 240.0,
      "max_tokens": 50000,
      "run_max_turns": 1,
      "instructions_path": "prompts/agents/smoke/markdown_cleaner.md"
    },
    "notebook_refactor": {
      "name": "NotebookRefactorer",
      "model": "gpt-5-mini",
      "reasoning_effort": "medium",
      "verbosity": "medium",
      "timeout": 240.0,
      "max_tokens": 50000,
      "run_max_turns": 2,
      "instructions_path": "prompts/agents/smoke/notebook_refactor.md"
    },
    "reviewer": {
      "name": "QualityReviewer",
      "model": "gpt-5-mini",
      "reasoning_effort": "medium",
      "verbosity": "medium",
      "timeout": 180.0,
      "max_tokens": 8192,
      "run_max_turns": 2,
      "attempt_overrides": {
        "on_invalid_json": {
          "prompt_suffix": "prompts/smoke/review_on_invalid_json.md",
          "model_settings": {
            "max_tokens": 4096,
            "verbosity": "low"
          }
        }
      },
      "instructions_path": "prompts/agents/smoke/reviewer.md"
    },
    "namer": {
      "name": "FileNamer",
      "model": "gpt-5-mini",
      "reasoning_effort": "minimal",
      "verbosity": "low",
      "timeout": 120.0,
      "max_tokens": 1024,
      "run_max_turns": 1,
      "instructions_path": "prompts/agents/smoke/namer.md"
    },
    "orchestrator": {
      "name": "WorkflowOrchestrator",
      "instructions_path": "prompts/agents/smoke/orchestrator.md",
      "model": "gpt-5-mini",
      "reasoning_effort": "low",
      "verbosity": "low",
      "timeout": 180.0,
      "max_tokens": 4096,
      "run_max_turns": 10,
      "tools": [
        {
          "agent": "router",
          "tool_name": "route_document",
          "description": "Classify the document as markdown or notebook."
        },
        {
          "agent": "markdown_cleaner",
          "tool_name": "clean_markdown",
          "description": "Transform markdown content and summarise key changes."
        },
        {
          "agent": "notebook_refactor",
          "tool_name": "refactor_notebook",
          "description": "Convert notebooks to Python scripts and provide an optional summary."
        },
        {
          "agent": "reviewer",
          "tool_name": "review_output",
          "description": "Assess quality, returning approval status, issues, and suggestions."
        },
        {
          "agent": "namer",
          "tool_name": "name_output",
          "description": "Provide the output slug, extension, and optional title."
        }
      ]
    }
  }
}

{
  "logging": {
    "log_file": "logs/agent_pipeline.log",
    "trace_workflow_name": "doc-cleaning-pipeline",
    "trace_metadata": {
      "project": "firecrawl-doc-cleaning"
    }
  },
  "io": {
    "input_artifact": "artifacts/lark_docs.json",
    "output_directory": "artifacts/cleaned_docs"
  },
  "rework": {
    "enabled": true,
    "max_cycles": 1,
    "target_on_reject": "same"
  },
  "prompts": {
    "dir": "prompts/pipeline"
  },
  "concurrency": {
    "router_pool": 4,
    "markdown_pool": 6,
    "notebook_pool": 3,
    "review_pool": 2,
    "naming_pool": 2,
    "channel_buffer": 20
  },
  "retry": {
    "max_attempts": 3,
    "initial_delay": 2.0,
    "backoff_multiplier": 2.0,
    "max_delay": 30.0,
    "jitter_ratio": 0.5
  },
  "agents": {
    "router": {
      "name": "DocumentRouter",
      "model": "gpt-5-nano",
      "reasoning_effort": "minimal",
      "verbosity": "low",
      "timeout": 180.0,
      "max_tokens": 4096,
      "run_max_turns": 1,
      "instructions_path": "prompts/agents/pipeline/router.md"
    },
    "markdown_cleaner": {
      "name": "MarkdownPolisher",
      "model": "gpt-5",
      "reasoning_effort": "minimal",
      "verbosity": "medium",
      "timeout": 180.0,
      "max_tokens": 50000,
      "run_max_turns": 1,
      "instructions_path": "prompts/agents/pipeline/markdown_cleaner.md"
    },
    "notebook_refactor": {
      "name": "NotebookRefactorer",
      "model": "gpt-5",
      "reasoning_effort": "high",
      "verbosity": "medium",
      "timeout": 180.0,
      "max_tokens": 50000,
      "run_max_turns": 2,
      "instructions_path": "prompts/agents/pipeline/notebook_refactor.md"
    },
    "reviewer": {
      "name": "QualityReviewer",
      "model": "gpt-5-mini",
      "reasoning_effort": "medium",
      "verbosity": "medium",
      "timeout": 180.0,
      "max_tokens": 4096,
      "run_max_turns": 2,
      "attempt_overrides": {
        "on_invalid_json": {
          "prompt_suffix": "prompts/pipeline/review_on_invalid_json.md",
          "model_settings": {
            "max_tokens": 1024,
            "verbosity": "low"
          }
        }
      },
      "instructions_path": "prompts/agents/pipeline/reviewer.md"
    },
    "namer": {
      "name": "FileNamer",
      "model": "gpt-5-nano",
      "reasoning_effort": "minimal",
      "verbosity": "low",
      "timeout": 180.0,
      "max_tokens": 4096,
      "run_max_turns": 1,
      "instructions_path": "prompts/agents/pipeline/namer.md"
    }
  }
}

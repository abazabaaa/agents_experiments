https://lark-parser.readthedocs.io/en/stable/_downloads/5811ce5e933efd9af1ae8e52d16a3a4f/custom_lexer.ipynb

```
{
  "cells": [\
    {\
      "cell_type": "markdown",\
      "metadata": {},\
      "source": [\
        "\n# Custom lexer\n\nDemonstrates using a custom lexer to parse a non-textual stream of data\n\nYou can use a custom lexer to tokenize text when the lexers offered by Lark\nare too slow, or not flexible enough.\n\nYou can also use it (as shown in this example) to tokenize streams of objects.\n"\
      ]\
    },\
    {\
      "cell_type": "code",\
      "execution_count": null,\
      "metadata": {\
        "collapsed": false\
      },\
      "outputs": [],\
      "source": [\
        "from lark import Lark, Transformer, v_args\nfrom lark.lexer import Lexer, Token\n\nclass TypeLexer(Lexer):\n    def __init__(self, lexer_conf):\n        pass\n\n    def lex(self, data):\n        for obj in data:\n            if isinstance(obj, int):\n                yield Token('INT', obj)\n            elif isinstance(obj, (type(''), type(u''))):\n                yield Token('STR', obj)\n            else:\n                raise TypeError(obj)\n\nparser = Lark(\"\"\"\n        start: data_item+\n        data_item: STR INT*\n\n        %declare STR INT\n        \"\"\", parser='lalr', lexer=TypeLexer)\n\n\nclass ParseToDict(Transformer):\n    @v_args(inline=True)\n    def data_item(self, name, *numbers):\n        return name.value, [n.value for n in numbers]\n\n    start = dict\n\n\ndef test():\n    data = ['alice', 1, 27, 3, 'bob', 4, 'carrie', 'dan', 8, 6]\n\n    print(data)\n\n    tree = parser.parse(data)\n    res = ParseToDict().transform(tree)\n\n    print('-->')\n    print(res) # prints {'alice': [1, 27, 3], 'bob': [4], 'carrie': [], 'dan': [8, 6]}\n\n\nif __name__ == '__main__':\n    test()"\
      ]\
    }\
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "Python 3",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.7.17"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 0
}
```
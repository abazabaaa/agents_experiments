https://lark-parser.readthedocs.io/en/stable/examples/advanced/custom_lexer.html

- [Home](https://lark-parser.readthedocs.io/en/stable/index.html)
- [Examples for Lark](https://lark-parser.readthedocs.io/en/stable/examples/index.html)
- [Advanced Examples](https://lark-parser.readthedocs.io/en/stable/examples/advanced/index.html)
- Custom lexer
- [Edit on GitHub](https://github.com/lark-parser/lark/blob/acfe33d943a1310f3ca26145eb2896bc5c4955c9/docs/examples/advanced/custom_lexer.rst)

[Previous](https://lark-parser.readthedocs.io/en/stable/examples/advanced/reconstruct_json.html "Reconstruct a JSON") [Next](https://lark-parser.readthedocs.io/en/stable/examples/advanced/tree_forest_transformer.html "Transform a Forest")

* * *

Note

[Go to the end](https://lark-parser.readthedocs.io/en/stable/examples/advanced/custom_lexer.html#sphx-glr-download-examples-advanced-custom-lexer-py)
to download the full example code

# Custom lexer [](https://lark-parser.readthedocs.io/en/stable/examples/advanced/custom_lexer.html\#custom-lexer "Permalink to this heading")

Demonstrates using a custom lexer to parse a non-textual stream of data

You can use a custom lexer to tokenize text when the lexers offered by Lark
are too slow, or not flexible enough.

You can also use it (as shown in this example) to tokenize streams of objects.

```
from lark import Lark, Transformer, v_args
from lark.lexer import Lexer, Token

class TypeLexer(Lexer):
    def __init__(self, lexer_conf):
        pass

    def lex(self, data):
        for obj in data:
            if isinstance(obj, int):
                yield Token('INT', obj)
            elif isinstance(obj, (type(''), type(u''))):
                yield Token('STR', obj)
            else:
                raise TypeError(obj)

parser = Lark("""
        start: data_item+
        data_item: STR INT*

        %declare STR INT
        """, parser='lalr', lexer=TypeLexer)

class ParseToDict(Transformer):
    @v_args(inline=True)
    def data_item(self, name, *numbers):
        return name.value, [n.value for n in numbers]

    start = dict

def test():
    data = ['alice', 1, 27, 3, 'bob', 4, 'carrie', 'dan', 8, 6]

    print(data)

    tree = parser.parse(data)
    res = ParseToDict().transform(tree)

    print('-->')
    print(res) # prints {'alice': [1, 27, 3], 'bob': [4], 'carrie': [], 'dan': [8, 6]}

if __name__ == '__main__':
    test()

```

**Total running time of the script:** (0 minutes 0.000 seconds)

[`Download Python source code: custom_lexer.py`](https://lark-parser.readthedocs.io/en/stable/_downloads/4667ab58050962ac05455b953c59244f/custom_lexer.py)

[`Download Jupyter notebook: custom_lexer.ipynb`](https://lark-parser.readthedocs.io/en/stable/_downloads/5811ce5e933efd9af1ae8e52d16a3a4f/custom_lexer.ipynb)

[Gallery generated by Sphinx-Gallery](https://sphinx-gallery.github.io/)

Versions[latest](https://lark-parser.readthedocs.io/en/latest/examples/advanced/custom_lexer.html)**[stable](https://lark-parser.readthedocs.io/en/stable/examples/advanced/custom_lexer.html)**Downloads[PDF](https://lark-parser.readthedocs.io/_/downloads/en/stable/pdf/)[HTML](https://lark-parser.readthedocs.io/_/downloads/en/stable/htmlzip/)[EPUB](https://lark-parser.readthedocs.io/_/downloads/en/stable/epub/)On Read the Docs[Project Home](https://app.readthedocs.org/projects/lark-parser/?utm_source=lark-parser&utm_content=flyout)[Builds](https://app.readthedocs.org/projects/lark-parser/builds/?utm_source=lark-parser&utm_content=flyout)Search

* * *

[Addons documentation](https://docs.readthedocs.io/page/addons.html?utm_source=lark-parser&utm_content=flyout) ― Hosted by
[Read the Docs](https://about.readthedocs.com/?utm_source=lark-parser&utm_content=flyout)
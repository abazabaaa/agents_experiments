https://lark-parser.readthedocs.io/en/stable/_downloads/207f80f4ec59e1e363837373665f649f/turtle_dsl.ipynb

```
{
  "cells": [\
    {\
      "cell_type": "markdown",\
      "metadata": {},\
      "source": [\
        "\n# Turtle DSL\n\nImplements a LOGO-like toy language for Python\u2019s turtle, with interpreter.\n"\
      ]\
    },\
    {\
      "cell_type": "code",\
      "execution_count": null,\
      "metadata": {\
        "collapsed": false\
      },\
      "outputs": [],\
      "source": [\
        "try:\n    input = raw_input   # For Python2 compatibility\nexcept NameError:\n    pass\n\nimport turtle\n\nfrom lark import Lark\n\nturtle_grammar = \"\"\"\n    start: instruction+\n\n    instruction: MOVEMENT NUMBER            -> movement\n               | \"c\" COLOR [COLOR]          -> change_color\n               | \"fill\" code_block          -> fill\n               | \"repeat\" NUMBER code_block -> repeat\n\n    code_block: \"{\" instruction+ \"}\"\n\n    MOVEMENT: \"f\"|\"b\"|\"l\"|\"r\"\n    COLOR: LETTER+\n\n    %import common.LETTER\n    %import common.INT -> NUMBER\n    %import common.WS\n    %ignore WS\n\"\"\"\n\nparser = Lark(turtle_grammar)\n\ndef run_instruction(t):\n    if t.data == 'change_color':\n        turtle.color(*t.children)   # We just pass the color names as-is\n\n    elif t.data == 'movement':\n        name, number = t.children\n        { 'f': turtle.fd,\n          'b': turtle.bk,\n          'l': turtle.lt,\n          'r': turtle.rt, }[name](int(number))\n\n    elif t.data == 'repeat':\n        count, block = t.children\n        for i in range(int(count)):\n            run_instruction(block)\n\n    elif t.data == 'fill':\n        turtle.begin_fill()\n        run_instruction(t.children[0])\n        turtle.end_fill()\n\n    elif t.data == 'code_block':\n        for cmd in t.children:\n            run_instruction(cmd)\n    else:\n        raise SyntaxError('Unknown instruction: %s' % t.data)\n\n\ndef run_turtle(program):\n    parse_tree = parser.parse(program)\n    for inst in parse_tree.children:\n        run_instruction(inst)\n\ndef main():\n    while True:\n        code = input('> ')\n        try:\n            run_turtle(code)\n        except Exception as e:\n            print(e)\n\ndef test():\n    text = \"\"\"\n        c red yellow\n        fill { repeat 36 {\n            f200 l170\n        }}\n    \"\"\"\n    run_turtle(text)\n\nif __name__ == '__main__':\n    # test()\n    main()"\
      ]\
    }\
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "Python 3",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.7.17"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 0
}
```
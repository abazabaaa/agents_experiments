https://lark-parser.readthedocs.io/en/stable/_static/lark_cheatsheet.pdf

# Lark Cheat Sheet

|     |     |
| --- | --- |
| Tree Shaping |
| rule: "foo" BAR | "foo" will be filtered out |
| !rule: "foo" BAR | "foo" will be kept |
| rule: /foo/ BAR | /foo/ will be kept |
| \_TERM | Filterout this terminal |
| \_rule | Always inline this rule |
| ?rule: | Inline if matched 1 child |
| foo bar -> alias | Createalias |

Rules are a branch (node) in the resulting tree, and its children are its matches, in the order of matching.

Term​inals (tokens) are always values in the tree, never branches.

Inlining rules means removing their branch and replacing it with their children.

|     |     |     |     |
| --- | --- | --- | --- |
| leatograpny byerezsh via cheatography.com/61630/cs/15 |
| Lark Options | Grammar Definitions |  |
| parser="earley" | Use the Earley parser (default) | rule: ... | Define a rule |
| Use the LALR(1) | TERM:... | Define a terminal |
| parser="lalr" | parser | rule.n: | Rule with priority n |
| Use the CYK | TERM.n:.. | Terminal with priority n |
| lexer="standard" | parser | // text | Comment |
| Use the standard lexer | %ignore ... | Ignore terminal in input |
| ambiguity='explicit' | Return all | %import ... | Import terminal from file |
| derivations for Earley | %declare TERM | Declare a terminal without a pattern (used for postlex) |
| start="foo" | Use "foo" as starting rule | Rules consist of values, other rules and terminals. Terminals only consist of values and other |
| transformer=... | Apply transformer to tree (for LALR) | terminals. |
| propagate\_positions | Fill tre instances with line number | Grammar Patterns |  |
| information | foo bar | Match sequence |
| keep\_all\_tokens | Don't remove | (foo bar) | Group together (for operations) |
| unnamed | foo 丨 bar | Match one or the other |
| postlex | terminals | foo？ | Match Oor 1 instances |
| Provide a wrapper for the | \[foo bar\] | Match O or 1 instances |
|  | lexer | foo\* | Match O or more instances |
| Provide an | foo+ | Match 1 or more instances |
|  | alternative for Tree |  |  |
|  | foo~3 | Match exactly3 instances |
| Token Reference |  |  |
| token.type | Returns name of terminal | Terminal Atoms |  |
|  | "string" | String to match |
| token.value | Return matched string | "string"i | Case-insensitive string |
| token.line | Line of match | /regexp/ | Regular Expression |
| token.column | Column of match | /re/imslux | Regular Expression with flags |
| token.end\_line | Line where match ends | "a".."z" | Literal range |
| token.end\_colu ends | Column where match |  |  |
| mn len(token) Length of match |  |  |
| Tokens inherit from str, so all string operations are valid |  |  |

Tree Reference

|     |     |
| --- | --- |
| tree.data | Get rule name |
| tree.children | Get rule matches |
| print(tree.pretty()) | Pretty-print tree |
| tree.iter\_subtrees() | Iterate on all |
|  | nodes |
| tree.find\_data("foo") | Findnodeswith |
| rule foo |
| tree.find\_pred(...) | Find nodes by |
| predicate |
| tree1 == tree2 | Compare trees |
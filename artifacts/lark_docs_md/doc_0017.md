https://lark-parser.readthedocs.io/en/stable/_downloads/4b6a9b4fb62278f5d7a70e5b2900ff58/indented_tree.ipynb

```
{
  "cells": [\
    {\
      "cell_type": "markdown",\
      "metadata": {},\
      "source": [\
        "\n# Parsing Indentation\n\nA demonstration of parsing indentation (\u201cwhitespace significant\u201d language)\nand the usage of the Indenter class.\n\nSince indentation is context-sensitive, a postlex stage is introduced to\nmanufacture INDENT/DEDENT tokens.\n\nIt is crucial for the indenter that the NL_type matches\nthe spaces (and tabs) after the newline.\n"\
      ]\
    },\
    {\
      "cell_type": "code",\
      "execution_count": null,\
      "metadata": {\
        "collapsed": false\
      },\
      "outputs": [],\
      "source": [\
        "from lark import Lark\nfrom lark.indenter import Indenter\n\ntree_grammar = r\"\"\"\n    ?start: _NL* tree\n\n    tree: NAME _NL [_INDENT tree+ _DEDENT]\n\n    %import common.CNAME -> NAME\n    %import common.WS_INLINE\n    %declare _INDENT _DEDENT\n    %ignore WS_INLINE\n\n    _NL: /(\\r?\\n[\\t ]*)+/\n\"\"\"\n\nclass TreeIndenter(Indenter):\n    NL_type = '_NL'\n    OPEN_PAREN_types = []\n    CLOSE_PAREN_types = []\n    INDENT_type = '_INDENT'\n    DEDENT_type = '_DEDENT'\n    tab_len = 8\n\nparser = Lark(tree_grammar, parser='lalr', postlex=TreeIndenter())\n\ntest_tree = \"\"\"\na\n    b\n    c\n        d\n        e\n    f\n        g\n\"\"\"\n\ndef test():\n    print(parser.parse(test_tree).pretty())\n\nif __name__ == '__main__':\n    test()"\
      ]\
    }\
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "Python 3",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.7.17"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 0
}
```
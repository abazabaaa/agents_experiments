https://lark-parser.readthedocs.io/en/stable/_downloads/60290154124d6b16926446036bb711d6/python_parser.ipynb

```
{
  "cells": [\
    {\
      "cell_type": "markdown",\
      "metadata": {},\
      "source": [\
        "\n# Grammar-complete Python Parser\n\nA fully-working Python 2 & 3 parser (but not production ready yet!)\n\nThis example demonstrates usage of the included Python grammars\n"\
      ]\
    },\
    {\
      "cell_type": "code",\
      "execution_count": null,\
      "metadata": {\
        "collapsed": false\
      },\
      "outputs": [],\
      "source": [\
        "import sys\nimport os, os.path\nfrom io import open\nimport glob, time\n\nfrom lark import Lark\nfrom lark.indenter import PythonIndenter\n\n\nkwargs = dict(postlex=PythonIndenter(), start='file_input')\n\n# Official Python grammar by Lark\npython_parser3 = Lark.open_from_package('lark', 'python.lark', ['grammars'], parser='lalr', **kwargs)\n\n# Local Python2 grammar\npython_parser2 = Lark.open('python2.lark', rel_to=__file__, parser='lalr', **kwargs)\npython_parser2_earley = Lark.open('python2.lark', rel_to=__file__, parser='earley', lexer='basic', **kwargs)\n\ntry:\n    xrange\nexcept NameError:\n    chosen_parser = python_parser3\nelse:\n    chosen_parser = python_parser2\n\n\ndef _read(fn, *args):\n    kwargs = {'encoding': 'iso-8859-1'}\n    with open(fn, *args, **kwargs) as f:\n        return f.read()\n\ndef _get_lib_path():\n    if os.name == 'nt':\n        if 'PyPy' in sys.version:\n            return os.path.join(sys.base_prefix, 'lib-python', sys.winver)\n        else:\n            return os.path.join(sys.base_prefix, 'Lib')\n    else:\n        return [x for x in sys.path if x.endswith('%s.%s' % sys.version_info[:2])][0]\n\ndef test_python_lib():\n    path = _get_lib_path()\n\n    start = time.time()\n    files = glob.glob(path+'/*.py')\n    total_kb = 0\n    for f in files:\n        r = _read(os.path.join(path, f))\n        kb = len(r) / 1024\n        print( '%s -\\t%.1f kb' % (f, kb))\n        chosen_parser.parse(r + '\\n')\n        total_kb += kb\n\n    end = time.time()\n    print( \"test_python_lib (%d files, %.1f kb), time: %.2f secs\"%(len(files), total_kb, end-start) )\n\ndef test_earley_equals_lalr():\n    path = _get_lib_path()\n\n    files = glob.glob(path+'/*.py')\n    for f in files:\n        print( f )\n        tree1 = python_parser2.parse(_read(os.path.join(path, f)) + '\\n')\n        tree2 = python_parser2_earley.parse(_read(os.path.join(path, f)) + '\\n')\n        assert tree1 == tree2\n\n\nif __name__ == '__main__':\n    test_python_lib()\n    # test_earley_equals_lalr()\n    # python_parser3.parse(_read(sys.argv[1]) + '\\n')"\
      ]\
    }\
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "Python 3",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.7.17"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 0
}
```
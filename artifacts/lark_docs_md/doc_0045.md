https://lark-parser.readthedocs.io/en/stable/examples/indented_tree.html

- [Home](https://lark-parser.readthedocs.io/en/stable/index.html)
- [Examples for Lark](https://lark-parser.readthedocs.io/en/stable/examples/index.html)
- Parsing Indentation
- [Edit on GitHub](https://github.com/lark-parser/lark/blob/acfe33d943a1310f3ca26145eb2896bc5c4955c9/docs/examples/indented_tree.rst)

[Previous](https://lark-parser.readthedocs.io/en/stable/examples/index.html "Examples for Lark") [Next](https://lark-parser.readthedocs.io/en/stable/examples/lark_grammar.html "Lark Grammar")

* * *

Note

[Go to the end](https://lark-parser.readthedocs.io/en/stable/examples/indented_tree.html#sphx-glr-download-examples-indented-tree-py)
to download the full example code

# Parsing Indentation [](https://lark-parser.readthedocs.io/en/stable/examples/indented_tree.html\#parsing-indentation "Permalink to this heading")

A demonstration of parsing indentation (“whitespace significant” language)
and the usage of the Indenter class.

Since indentation is context-sensitive, a postlex stage is introduced to
manufacture INDENT/DEDENT tokens.

It is crucial for the indenter that the NL\_type matches
the spaces (and tabs) after the newline.

```
from lark import Lark
from lark.indenter import Indenter

tree_grammar = r"""
    ?start: _NL* tree

    tree: NAME _NL [_INDENT tree+ _DEDENT]

    %import common.CNAME -> NAME
    %import common.WS_INLINE
    %declare _INDENT _DEDENT
    %ignore WS_INLINE

    _NL: /(\r?\n[\t ]*)+/
"""

class TreeIndenter(Indenter):
    NL_type = '_NL'
    OPEN_PAREN_types = []
    CLOSE_PAREN_types = []
    INDENT_type = '_INDENT'
    DEDENT_type = '_DEDENT'
    tab_len = 8

parser = Lark(tree_grammar, parser='lalr', postlex=TreeIndenter())

test_tree = """
a
    b
    c
        d
        e
    f
        g
"""

def test():
    print(parser.parse(test_tree).pretty())

if __name__ == '__main__':
    test()

```

**Total running time of the script:** (0 minutes 0.000 seconds)

[`Download Python source code: indented_tree.py`](https://lark-parser.readthedocs.io/en/stable/_downloads/7cc2abf4fecd3796ed4ad6d455bda349/indented_tree.py)

[`Download Jupyter notebook: indented_tree.ipynb`](https://lark-parser.readthedocs.io/en/stable/_downloads/4b6a9b4fb62278f5d7a70e5b2900ff58/indented_tree.ipynb)

[Gallery generated by Sphinx-Gallery](https://sphinx-gallery.github.io/)

Versions[latest](https://lark-parser.readthedocs.io/en/latest/examples/indented_tree.html)**[stable](https://lark-parser.readthedocs.io/en/stable/examples/indented_tree.html)**Downloads[PDF](https://lark-parser.readthedocs.io/_/downloads/en/stable/pdf/)[HTML](https://lark-parser.readthedocs.io/_/downloads/en/stable/htmlzip/)[EPUB](https://lark-parser.readthedocs.io/_/downloads/en/stable/epub/)On Read the Docs[Project Home](https://app.readthedocs.org/projects/lark-parser/?utm_source=lark-parser&utm_content=flyout)[Builds](https://app.readthedocs.org/projects/lark-parser/builds/?utm_source=lark-parser&utm_content=flyout)Search

* * *

[Addons documentation](https://docs.readthedocs.io/page/addons.html?utm_source=lark-parser&utm_content=flyout) ― Hosted by
[Read the Docs](https://about.readthedocs.com/?utm_source=lark-parser&utm_content=flyout)
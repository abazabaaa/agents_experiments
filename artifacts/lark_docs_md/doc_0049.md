https://lark-parser.readthedocs.io/en/stable/examples/advanced/error_reporting_lalr.html

- [Home](https://lark-parser.readthedocs.io/en/stable/index.html)
- [Examples for Lark](https://lark-parser.readthedocs.io/en/stable/examples/index.html)
- [Advanced Examples](https://lark-parser.readthedocs.io/en/stable/examples/advanced/index.html)
- Example-Driven Error Reporting
- [Edit on GitHub](https://github.com/lark-parser/lark/blob/acfe33d943a1310f3ca26145eb2896bc5c4955c9/docs/examples/advanced/error_reporting_lalr.rst)

[Previous](https://lark-parser.readthedocs.io/en/stable/examples/advanced/error_reporting_earley.html "Example-Driven Error Reporting") [Next](https://lark-parser.readthedocs.io/en/stable/examples/advanced/reconstruct_python.html "Reconstruct Python")

* * *

Note

[Go to the end](https://lark-parser.readthedocs.io/en/stable/examples/advanced/error_reporting_lalr.html#sphx-glr-download-examples-advanced-error-reporting-lalr-py)
to download the full example code

# Example-Driven Error Reporting [](https://lark-parser.readthedocs.io/en/stable/examples/advanced/error_reporting_lalr.html\#example-driven-error-reporting "Permalink to this heading")

A demonstration of example-driven error reporting with the LALR parser
(See also: error\_reporting\_earley.py)

```
from lark import Lark, UnexpectedInput

from _json_parser import json_grammar   # Using the grammar from the json_parser example

json_parser = Lark(json_grammar, parser='lalr')

class JsonSyntaxError(SyntaxError):
    def __str__(self):
        context, line, column = self.args
        return '%s at line %s, column %s.\n\n%s' % (self.label, line, column, context)

class JsonMissingValue(JsonSyntaxError):
    label = 'Missing Value'

class JsonMissingOpening(JsonSyntaxError):
    label = 'Missing Opening'

class JsonMissingClosing(JsonSyntaxError):
    label = 'Missing Closing'

class JsonMissingComma(JsonSyntaxError):
    label = 'Missing Comma'

class JsonTrailingComma(JsonSyntaxError):
    label = 'Trailing Comma'

def parse(json_text):
    try:
        j = json_parser.parse(json_text)
    except UnexpectedInput as u:
        exc_class = u.match_examples(json_parser.parse, {
            JsonMissingOpening: ['{"foo": ]}',
                                 '{"foor": }}',
                                 '{"foo": }'],
            JsonMissingClosing: ['{"foo": [}',\
                                 '{',\
                                 '{"a": 1',\
                                 '[1'],\
            JsonMissingComma: ['[1 2]',\
                               '[false 1]',\
                               '["b" 1]',\
                               '{"a":true 1:4}',\
                               '{"a":1 1:4}',\
                               '{"a":"b" 1:4}'],\
            JsonTrailingComma: ['[,]',\
                                '[1,]',\
                                '[1,2,]',\
                                '{"foo":1,}',\
                                '{"foo":false,"bar":true,}']\
        }, use_accepts=True)\
        if not exc_class:\
            raise\
        raise exc_class(u.get_context(json_text), u.line, u.column)\
\
def test():\
    try:\
        parse('{"example1": "value"')\
    except JsonMissingClosing as e:\
        print(e)\
\
    try:\
        parse('{"example2": ] ')\
    except JsonMissingOpening as e:\
        print(e)\
\
if __name__ == '__main__':\
    test()\
\
```\
\
**Total running time of the script:** (0 minutes 0.000 seconds)\
\
[`Download Python source code: error_reporting_lalr.py`](https://lark-parser.readthedocs.io/en/stable/_downloads/2cc75b757e7515472722c8c02d4fe4e4/error_reporting_lalr.py)\
\
[`Download Jupyter notebook: error_reporting_lalr.ipynb`](https://lark-parser.readthedocs.io/en/stable/_downloads/7279f5d640bfe9814468a2adf38516d5/error_reporting_lalr.ipynb)\
\
[Gallery generated by Sphinx-Gallery](https://sphinx-gallery.github.io/)\
\
Versions[latest](https://lark-parser.readthedocs.io/en/latest/examples/advanced/error_reporting_lalr.html)**[stable](https://lark-parser.readthedocs.io/en/stable/examples/advanced/error_reporting_lalr.html)**Downloads[PDF](https://lark-parser.readthedocs.io/_/downloads/en/stable/pdf/)[HTML](https://lark-parser.readthedocs.io/_/downloads/en/stable/htmlzip/)[EPUB](https://lark-parser.readthedocs.io/_/downloads/en/stable/epub/)On Read the Docs[Project Home](https://app.readthedocs.org/projects/lark-parser/?utm_source=lark-parser&utm_content=flyout)[Builds](https://app.readthedocs.org/projects/lark-parser/builds/?utm_source=lark-parser&utm_content=flyout)Search\
\
* * *\
\
[Addons documentation](https://docs.readthedocs.io/page/addons.html?utm_source=lark-parser&utm_content=flyout) ― Hosted by\
[Read the Docs](https://about.readthedocs.com/?utm_source=lark-parser&utm_content=flyout)
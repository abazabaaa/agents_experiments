https://lark-parser.readthedocs.io/en/stable/examples/advanced/reconstruct_json.html

- [Home](https://lark-parser.readthedocs.io/en/stable/index.html)
- [Examples for Lark](https://lark-parser.readthedocs.io/en/stable/examples/index.html)
- [Advanced Examples](https://lark-parser.readthedocs.io/en/stable/examples/advanced/index.html)
- Reconstruct a JSON
- [Edit on GitHub](https://github.com/lark-parser/lark/blob/acfe33d943a1310f3ca26145eb2896bc5c4955c9/docs/examples/advanced/reconstruct_json.rst)

[Previous](https://lark-parser.readthedocs.io/en/stable/examples/advanced/error_handling.html "Error handling using an interactive parser") [Next](https://lark-parser.readthedocs.io/en/stable/examples/advanced/custom_lexer.html "Custom lexer")

* * *

Note

[Go to the end](https://lark-parser.readthedocs.io/en/stable/examples/advanced/reconstruct_json.html#sphx-glr-download-examples-advanced-reconstruct-json-py)
to download the full example code

# Reconstruct a JSON [](https://lark-parser.readthedocs.io/en/stable/examples/advanced/reconstruct_json.html\#reconstruct-a-json "Permalink to this heading")

Demonstrates the experimental text-reconstruction feature

The Reconstructor takes a parse tree (already filtered from punctuation, of course),
and reconstructs it into correct text, that can be parsed correctly.
It can be useful for creating “hooks” to alter data before handing it to other parsers. You can also use it to generate samples from scratch.

```
import json

from lark import Lark
from lark.reconstruct import Reconstructor

from _json_parser import json_grammar

test_json = '''
    {
        "empty_object" : {},
        "empty_array"  : [],
        "booleans"     : { "YES" : true, "NO" : false },
        "numbers"      : [ 0, 1, -2, 3.3, 4.4e5, 6.6e-7 ],
        "strings"      : [ "This", [ "And" , "That", "And a \\"b" ] ],
        "nothing"      : null
    }
'''

def test_earley():

    json_parser = Lark(json_grammar, maybe_placeholders=False)
    tree = json_parser.parse(test_json)

    new_json = Reconstructor(json_parser).reconstruct(tree)
    print (new_json)
    print (json.loads(new_json) == json.loads(test_json))

def test_lalr():

    json_parser = Lark(json_grammar, parser='lalr', maybe_placeholders=False)
    tree = json_parser.parse(test_json)

    new_json = Reconstructor(json_parser).reconstruct(tree)
    print (new_json)
    print (json.loads(new_json) == json.loads(test_json))

test_earley()
test_lalr()

```

**Total running time of the script:** (0 minutes 0.000 seconds)

[`Download Python source code: reconstruct_json.py`](https://lark-parser.readthedocs.io/en/stable/_downloads/e6911b819cf4afa1ca68b5be22630e13/reconstruct_json.py)

[`Download Jupyter notebook: reconstruct_json.ipynb`](https://lark-parser.readthedocs.io/en/stable/_downloads/adf07a4514e9cfb278aef018e6994028/reconstruct_json.ipynb)

[Gallery generated by Sphinx-Gallery](https://sphinx-gallery.github.io/)

Versions[latest](https://lark-parser.readthedocs.io/en/latest/examples/advanced/reconstruct_json.html)**[stable](https://lark-parser.readthedocs.io/en/stable/examples/advanced/reconstruct_json.html)**Downloads[PDF](https://lark-parser.readthedocs.io/_/downloads/en/stable/pdf/)[HTML](https://lark-parser.readthedocs.io/_/downloads/en/stable/htmlzip/)[EPUB](https://lark-parser.readthedocs.io/_/downloads/en/stable/epub/)On Read the Docs[Project Home](https://app.readthedocs.org/projects/lark-parser/?utm_source=lark-parser&utm_content=flyout)[Builds](https://app.readthedocs.org/projects/lark-parser/builds/?utm_source=lark-parser&utm_content=flyout)Search

* * *

[Addons documentation](https://docs.readthedocs.io/page/addons.html?utm_source=lark-parser&utm_content=flyout) ― Hosted by
[Read the Docs](https://about.readthedocs.com/?utm_source=lark-parser&utm_content=flyout)
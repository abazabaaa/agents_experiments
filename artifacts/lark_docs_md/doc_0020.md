https://lark-parser.readthedocs.io/en/stable/examples/advanced/conf_lalr.html

- [Home](https://lark-parser.readthedocs.io/en/stable/index.html)
- [Examples for Lark](https://lark-parser.readthedocs.io/en/stable/examples/index.html)
- [Advanced Examples](https://lark-parser.readthedocs.io/en/stable/examples/advanced/index.html)
- LALR’s contextual lexer
- [Edit on GitHub](https://github.com/lark-parser/lark/blob/acfe33d943a1310f3ca26145eb2896bc5c4955c9/docs/examples/advanced/conf_lalr.rst)

[Previous](https://lark-parser.readthedocs.io/en/stable/examples/advanced/index.html "Advanced Examples") [Next](https://lark-parser.readthedocs.io/en/stable/examples/advanced/templates.html "Templates")

* * *

Note

[Go to the end](https://lark-parser.readthedocs.io/en/stable/examples/advanced/conf_lalr.html#sphx-glr-download-examples-advanced-conf-lalr-py)
to download the full example code

# LALR’s contextual lexer [](https://lark-parser.readthedocs.io/en/stable/examples/advanced/conf_lalr.html\#lalrs-contextual-lexer "Permalink to this heading")

This example demonstrates the power of LALR’s contextual lexer,
by parsing a toy configuration language.

The terminals NAME and VALUE overlap. They can match the same input.
A basic lexer would arbitrarily choose one over the other, based on priority,
which would lead to a (confusing) parse error.
However, due to the unambiguous structure of the grammar, Lark’s LALR(1) algorithm knows
which one of them to expect at each point during the parse.
The lexer then only matches the tokens that the parser expects.
The result is a correct parse, something that is impossible with a regular lexer.

Another approach is to use the Earley algorithm.
It will handle more cases than the contextual lexer, but at the cost of performance.
See examples/conf\_earley.py for an example of that approach.

```
from lark import Lark

parser = Lark(r"""
        start: _NL? section+
        section: "[" NAME "]" _NL item+
        item: NAME "=" VALUE? _NL

        NAME: /\w/+
        VALUE: /./+

        %import common.NEWLINE -> _NL
        %import common.WS_INLINE
        %ignore WS_INLINE
    """, parser="lalr")

sample_conf = """
[bla]
a=Hello
this="that",4
empty=
"""

print(parser.parse(sample_conf).pretty())

```

**Total running time of the script:** (0 minutes 0.000 seconds)

[`Download Python source code: conf_lalr.py`](https://lark-parser.readthedocs.io/en/stable/_downloads/3ed7cc698fc366fe253eac6ecf76ee3e/conf_lalr.py)

[`Download Jupyter notebook: conf_lalr.ipynb`](https://lark-parser.readthedocs.io/en/stable/_downloads/9e5ca2d2f34acae5a9391bd4b16a935f/conf_lalr.ipynb)

[Gallery generated by Sphinx-Gallery](https://sphinx-gallery.github.io/)

Versions[latest](https://lark-parser.readthedocs.io/en/latest/examples/advanced/conf_lalr.html)**[stable](https://lark-parser.readthedocs.io/en/stable/examples/advanced/conf_lalr.html)**Downloads[PDF](https://lark-parser.readthedocs.io/_/downloads/en/stable/pdf/)[HTML](https://lark-parser.readthedocs.io/_/downloads/en/stable/htmlzip/)[EPUB](https://lark-parser.readthedocs.io/_/downloads/en/stable/epub/)On Read the Docs[Project Home](https://app.readthedocs.org/projects/lark-parser/?utm_source=lark-parser&utm_content=flyout)[Builds](https://app.readthedocs.org/projects/lark-parser/builds/?utm_source=lark-parser&utm_content=flyout)Search

* * *

[Addons documentation](https://docs.readthedocs.io/page/addons.html?utm_source=lark-parser&utm_content=flyout) ― Hosted by
[Read the Docs](https://about.readthedocs.com/?utm_source=lark-parser&utm_content=flyout)
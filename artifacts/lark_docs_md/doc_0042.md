https://lark-parser.readthedocs.io/en/stable/examples/advanced/error_handling.html

- [Home](https://lark-parser.readthedocs.io/en/stable/index.html)
- [Examples for Lark](https://lark-parser.readthedocs.io/en/stable/examples/index.html)
- [Advanced Examples](https://lark-parser.readthedocs.io/en/stable/examples/advanced/index.html)
- Error handling using an interactive parser
- [Edit on GitHub](https://github.com/lark-parser/lark/blob/acfe33d943a1310f3ca26145eb2896bc5c4955c9/docs/examples/advanced/error_handling.rst)

[Previous](https://lark-parser.readthedocs.io/en/stable/examples/advanced/conf_earley.html "Earley’s dynamic lexer") [Next](https://lark-parser.readthedocs.io/en/stable/examples/advanced/reconstruct_json.html "Reconstruct a JSON")

* * *

Note

[Go to the end](https://lark-parser.readthedocs.io/en/stable/examples/advanced/error_handling.html#sphx-glr-download-examples-advanced-error-handling-py)
to download the full example code

# Error handling using an interactive parser [](https://lark-parser.readthedocs.io/en/stable/examples/advanced/error_handling.html\#error-handling-using-an-interactive-parser "Permalink to this heading")

This example demonstrates error handling using an interactive parser in LALR

When the parser encounters an UnexpectedToken exception, it creates a
an interactive parser with the current parse-state, and lets you control how
to proceed step-by-step. When you’ve achieved the correct parse-state,
you can resume the run by returning True.

```
from lark import Token

from _json_parser import json_parser

def ignore_errors(e):
    if e.token.type == 'COMMA':
        # Skip comma
        return True
    elif e.token.type == 'SIGNED_NUMBER':
        # Try to feed a comma and retry the number
        e.interactive_parser.feed_token(Token('COMMA', ','))
        e.interactive_parser.feed_token(e.token)
        return True

    # Unhandled error. Will stop parse and raise exception
    return False

def main():
    s = "[0 1, 2,, 3,,, 4, 5 6 ]"
    res = json_parser.parse(s, on_error=ignore_errors)
    print(res)      # prints [0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0]

main()

```

**Total running time of the script:** (0 minutes 0.000 seconds)

[`Download Python source code: error_handling.py`](https://lark-parser.readthedocs.io/en/stable/_downloads/3a11fd47a1fb670a6759747d618a244e/error_handling.py)

[`Download Jupyter notebook: error_handling.ipynb`](https://lark-parser.readthedocs.io/en/stable/_downloads/5a9e0a0dc353e4a9357e2204639f6c76/error_handling.ipynb)

[Gallery generated by Sphinx-Gallery](https://sphinx-gallery.github.io/)

Versions[latest](https://lark-parser.readthedocs.io/en/latest/examples/advanced/error_handling.html)**[stable](https://lark-parser.readthedocs.io/en/stable/examples/advanced/error_handling.html)**Downloads[PDF](https://lark-parser.readthedocs.io/_/downloads/en/stable/pdf/)[HTML](https://lark-parser.readthedocs.io/_/downloads/en/stable/htmlzip/)[EPUB](https://lark-parser.readthedocs.io/_/downloads/en/stable/epub/)On Read the Docs[Project Home](https://app.readthedocs.org/projects/lark-parser/?utm_source=lark-parser&utm_content=flyout)[Builds](https://app.readthedocs.org/projects/lark-parser/builds/?utm_source=lark-parser&utm_content=flyout)Search

* * *

[Addons documentation](https://docs.readthedocs.io/page/addons.html?utm_source=lark-parser&utm_content=flyout) ― Hosted by
[Read the Docs](https://about.readthedocs.com/?utm_source=lark-parser&utm_content=flyout)
---
title: Parsing Indentation (Lark Example)
description: Demonstrates parsing indentation (whitespace-sensitive syntax) in Lark using a postlex Indenter to generate INDENT/DEDENT tokens. Includes runnable example code and downloads.
source_url: https://lark-parser.readthedocs.io/en/stable/examples/indented_tree.html
original_format: reStructuredText via Sphinx
---

# Parsing Indentation

A demonstration of parsing indentation (a whitespace-significant language) and the usage of the Indenter class.

Since indentation is context-sensitive, a postlex stage is introduced to manufacture INDENT/DEDENT tokens.

It is crucial for the indenter that the NL_type matches the spaces (and tabs) after the newline.

```python
from lark import Lark
from lark.indenter import Indenter

tree_grammar = r"""
    ?start: _NL* tree

    tree: NAME _NL [_INDENT tree+ _DEDENT]

    %import common.CNAME -> NAME
    %import common.WS_INLINE
    %declare _INDENT _DEDENT
    %ignore WS_INLINE

    _NL: /(\r?\n[\t ]*)+/
"""

class TreeIndenter(Indenter):
    NL_type = '_NL'
    OPEN_PAREN_types = []
    CLOSE_PAREN_types = []
    INDENT_type = '_INDENT'
    DEDENT_type = '_DEDENT'
    tab_len = 8

parser = Lark(tree_grammar, parser='lalr', postlex=TreeIndenter())

test_tree = """
a
    b
    c
        d
        e
    f
        g
"""

def test():
    print(parser.parse(test_tree).pretty())

if __name__ == '__main__':
    test()
```

- Total running time of the script: 0 minutes 0.000 seconds

Downloads:
- Python source: https://lark-parser.readthedocs.io/en/stable/_downloads/7cc2abf4fecd3796ed4ad6d455bda349/indented_tree.py
- Jupyter notebook: https://lark-parser.readthedocs.io/en/stable/_downloads/4b6a9b4fb62278f5d7a70e5b2900ff58/indented_tree.ipynb

Additional resources:
- Examples index: https://lark-parser.readthedocs.io/en/stable/examples/index.html
- Lark Grammar example (next): https://lark-parser.readthedocs.io/en/stable/examples/lark_grammar.html
- Gallery generated by Sphinx-Gallery: https://sphinx-gallery.github.io/

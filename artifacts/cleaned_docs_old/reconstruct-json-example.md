---
title: Reconstruct a JSON (Lark Example)
description: Demonstrates Lark's experimental text reconstruction feature to rebuild JSON text from a parse tree using the Reconstructor.
source_url: https://lark-parser.readthedocs.io/en/stable/examples/advanced/reconstruct_json.html
edit_url: https://github.com/lark-parser/lark/blob/acfe33d943a1310f3ca26145eb2896bc5c4955c9/docs/examples/advanced/reconstruct_json.rst
related:
  - title: Error handling using an interactive parser (Previous)
    url: https://lark-parser.readthedocs.io/en/stable/examples/advanced/error_handling.html
  - title: Custom lexer (Next)
    url: https://lark-parser.readthedocs.io/en/stable/examples/advanced/custom_lexer.html
  - title: Download Python source code: reconstruct_json.py
    url: https://lark-parser.readthedocs.io/en/stable/_downloads/e6911b819cf4afa1ca68b5be22630e13/reconstruct_json.py
  - title: Download Jupyter notebook: reconstruct_json.ipynb
    url: https://lark-parser.readthedocs.io/en/stable/_downloads/adf07a4514e9cfb278aef018e6994028/reconstruct_json.ipynb
---

# Reconstruct a JSON

Demonstrates the experimental text-reconstruction feature.

The Reconstructor takes a parse tree (already filtered from punctuation) and reconstructs it into correct text that can be parsed again. It is useful for creating hooks to alter data before handing it to other parsers, and for generating sample text from scratch.

```python
import json

from lark import Lark
from lark.reconstruct import Reconstructor

from _json_parser import json_grammar

test_json = '''
    {
        "empty_object" : {},
        "empty_array"  : [],
        "booleans"     : { "YES" : true, "NO" : false },
        "numbers"      : [ 0, 1, -2, 3.3, 4.4e5, 6.6e-7 ],
        "strings"      : [ "This", [ "And" , "That", "And a \"b" ] ],
        "nothing"      : null
    }
'''

def test_earley():

    json_parser = Lark(json_grammar, maybe_placeholders=False)
    tree = json_parser.parse(test_json)

    new_json = Reconstructor(json_parser).reconstruct(tree)
    print(new_json)
    print(json.loads(new_json) == json.loads(test_json))

def test_lalr():

    json_parser = Lark(json_grammar, parser='lalr', maybe_placeholders=False)
    tree = json_parser.parse(test_json)

    new_json = Reconstructor(json_parser).reconstruct(tree)
    print(new_json)
    print(json.loads(new_json) == json.loads(test_json))

test_earley()
test_lalr()
```

Additional resources:
- Download Python source code: reconstruct_json.py — https://lark-parser.readthedocs.io/en/stable/_downloads/e6911b819cf4afa1ca68b5be22630e13/reconstruct_json.py
- Download Jupyter notebook: reconstruct_json.ipynb — https://lark-parser.readthedocs.io/en/stable/_downloads/adf07a4514e9cfb278aef018e6994028/reconstruct_json.ipynb
- Gallery generated by Sphinx-Gallery — https://sphinx-gallery.github.io/
